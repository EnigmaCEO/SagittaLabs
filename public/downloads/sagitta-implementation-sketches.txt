==================================================
Sagitta Implementation Sketches
==================================================
Status   : Early integration notes
Audience : Internal / prospective integrators

Purpose:
--------
This file outlines early implementation sketches connecting:
- Sagitta Protocol doctrine layers
- Sagitta AAA policy runtime
- Sagitta SPC project components

The intent is not to specify final architecture, but to make
integration boundaries explicit and reviewable.

==================================================
Sketch 1: Doctrine as a First-Class System Artifact
==================================================

Doctrine is treated as a versioned system artifact, not prose.

Each doctrine version defines:
- System invariants (hard constraints)
- Allowed policy envelopes
- Regime definitions
- Exception handling rules

Doctrine versions are immutable once activated.
All downstream systems reference doctrine by version ID.

Consumers:
----------
- Protocol components read invariants directly
- AAA compiles doctrine into executable policy constraints
- SPC mirrors doctrine versions as governance artifacts

Result:
-------
Every decision and allocation can be traced to an explicit
doctrine version.

==================================================
Sketch 2: AAA Policy Runtime and Decision Emission
==================================================

AAA operates as a bounded policy execution engine.

Inputs:
-------
- Normalized portfolio state
- Market and liquidity snapshot
- Doctrine-defined regime context
- Active policy envelope

Processing:
-----------
- Validate inputs against doctrine invariants
- Execute policy logic under constraints
- Generate allocation recommendations
- Produce constraint satisfaction report

Output:
-------
A single Decision Record containing:
- Inputs
- Applied doctrine version
- Applied policy version
- Allocation outputs
- Constraint checks
- Timestamp and hash

Decision Records are append-only and immutable.

==================================================
Sketch 3: Decision Records as the System Boundary
==================================================

Decision Records form the primary interface between:
- AAA runtime
- Execution systems
- Oversight and governance

Decision Records are:
- Machine readable
- Human reviewable
- Replayable for audit

Execution systems consume Decision Records but do not modify them.
Oversight systems review Decision Records without issuing
discretionary trades.

Result:
-------
Decision-making and execution remain cleanly separated.

==================================================
Sketch 4: SPC Oversight Without Discretionary Trading
==================================================

SPC structures interact with Sagitta through policy and review,
not trade selection.

SPC responsibilities:
---------------------
- Define investment mandate
- Approve doctrine and policy envelopes
- Review Decision Records
- Ensure compliance and reporting

AAA responsibilities:
---------------------
- Generate bounded allocation decisions
- Document rationale and constraints
- Operate continuously within approved envelopes

Trade execution occurs through:
-------------------------------
- Custodians
- Brokers
- Automated executors

SPC does not intervene at the trade level except under
explicit exceptional procedures.

==================================================
Sketch 5: Policy Envelope Compilation
==================================================

Human-readable policy intent is compiled into executable constraints.

Inputs:
-------
- Doctrine invariants
- Investment mandate
- Risk class definitions
- Allowed asset universe

Compilation produces:
--------------------
- Position limits
- Concentration caps
- Liquidity thresholds
- Rebalance rules
- Regime-dependent behavior

Compiled policy envelopes are validated against doctrine
before activation.
Policy versions are locked into Decision Records.

Result:
-------
Governance controls allocator behavior through compilation,
not negotiation.

==================================================
Sketch 6: Capital and Authority Flow Separation
==================================================

Authority flow:
---------------
Doctrine -> Policy -> AAA -> Decision Records -> Oversight

Capital flow (variant dependent):
--------------------------------
Deposits -> Custody -> Execution -> Settlement -> Reporting

Authority never flows downstream from execution.
Capital never flows upstream into governance logic.

This separation is enforced by system design.

==================================================
Sketch 7: Deployment and Integration Modes
==================================================

Sagitta supports multiple integration models.

Hosted mode:
------------
- AAA runtime operated by Sagitta Labs
- External wallets and accounts connected
- Fastest iteration path

Hybrid mode:
------------
- Policy and reporting hosted
- Execution agents run locally
- Decision Records synchronized

On-prem mode:
-------------
- Full runtime deployed in customer environment
- Doctrine updates pulled from registry
- Full internal control

All modes share identical doctrine and decision semantics.

==================================================
Sketch 8: Integrity Anchoring (Optional)
==================================================

Decision Records may be integrity-anchored via:
- Append-only logs
- External timestamping
- Blockchain hash anchoring

Only hashes and metadata are anchored.
Sensitive data remains off-chain.

Purpose:
--------
Verifiability, not publicity.

==================================================
End of Implementation Sketches
==================================================
